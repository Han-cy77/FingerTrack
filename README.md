---
editor_options: 
  markdown: 
    wrap: 72
---

# 🎨 R Shiny 隔空手势绘图板 (Air Canvas)

**基于 R Shiny 和 Google MediaPipe 的 Web 端 AR 绘图应用。**

无需任何特殊硬件，只需一个普通的网络摄像头，即可通过计算机视觉技术识别手部骨骼，实现“隔空作画”。项目实现了从手势识别、画笔交互、颜色切换到粗细调节的完整功能闭环。

------------------------------------------------------------------------

## ✨ 功能特性

-   **📷 实时手势追踪**：利用 AI 模型（MediaPipe Hands）以 60fps
    的流畅度识别手部关键点。
-   **👆 捏合交互 (Pinch-to-Draw)**：
    -   **食指+拇指捏合**：相当于鼠标“按下/拖拽”。
    -   **松开手指**：相当于鼠标“抬起”。
-   **🎨 虚拟调色盘**：
    -   提供 10 种常用颜色（红、橙、黄、绿、青、蓝、紫、粉、棕、黑）。
    -   支持橡皮擦模式和一键清空画布。
-   **🎚️ 滑动调节粗细**：
    -   首创的“虚拟滑动条”交互。
    -   捏住滑块上下拖动即可平滑调整画笔/橡皮的大小。
-   **🪞 智能镜像优化**：
    -   画布自动镜像翻转，符合直觉（像照镜子一样操作）。
    -   UI 文字经过特殊反转处理，在镜像画面中依然显示为正向文字。

------------------------------------------------------------------------

## 🛠️ 目录结构

为了确保程序正常运行，请务必严格按照以下文件结构组织代码：

AR_Paint_App/ ├── app.R \# R Shiny 主程序 (后端入口) ├── README.md \#
项目说明文档 └── www/ \# 静态资源目录 (名称必须为 www) ├── script.js \#
核心逻辑 (MediaPipe, 绘图算法, UI交互) └── style.css \# 界面样式 (CSS)

------------------------------------------------------------------------

## 🚀 快速开始

### 1. 环境准备

确保你已安装 R 语言和 RStudio。 安装本项目唯一的 R 依赖包：

install.packages("shiny")

### 2. 运行项目

1.  在 RStudio 中打开 `app.R` 文件。
2.  点击编辑器右上角的 **Run App** 按钮（或按 `Ctrl+Shift+Enter`）。
3.  应用会自动在你的默认浏览器中打开。

### 3. 授权摄像头

首次运行时，浏览器会弹窗询问摄像头权限，请点击 **“允许” (Allow)**。 \>
**注意**：首次加载 AI 模型可能需要 5-10 秒，请耐心等待直到画面出现。

------------------------------------------------------------------------

## 🎮 操作指南

### 🟢 基本姿势

-   站在摄像头前，确保手部在画面内且光线充足。
-   **光标**：屏幕上会有一个跟随你手指中心移动的小圆圈。
-   **捏合
    (Pinch)**：将**食指指尖**与**拇指指尖**捏在一起，即可触发操作。

### 🖌️ 如何画画

1.  **选择颜色**：移动手部，将光标悬停在左侧调色盘的某个颜色按钮上，**捏合一下**。按钮亮起表示选中。
2.  **开始绘画**：将手移动到右侧黑色画板区域，**保持捏合状态**并移动手部，即可留下笔迹。
3.  **停止绘画**：松开食指和拇指。

### 📏 调整画笔粗细

1.  找到调色盘右侧的**灰色竖线（滑动条）**。
2.  将手移动到滑动条上的**白色圆点**处。
3.  **捏住圆点**并**上下拖动**：
    -   向上拖动 ⬆️：变粗
    -   向下拖动 ⬇️：变细
4.  圆点中心会实时显示当前笔触大小的预览。

### 🧽 擦除与清空

-   **橡皮擦**：选中左下角的“橡皮”按钮，捏合使用即可擦除线条。
-   **清空画布**：在左下角的“清空”按钮上捏合一下，即可移除所有笔迹。

------------------------------------------------------------------------

## 🧠 技术原理

本项目采用了 **前后端分离** 的混合架构：

1.  **后端 (R Shiny)**：
    -   负责搭建 Web 服务器框架。
    -   管理静态资源 (`www` 文件夹) 的分发。
    -   由于图像处理对实时性要求极高，R
        不直接参与视频流计算，而是作为容器。
2.  **前端 (JavaScript + Canvas)**：
    -   **MediaPipe Hands**：Google
        开源的轻量级机器学习模型，在浏览器端直接运行，实时输出 21
        个手部关键点的 3D 坐标。
    -   **HTML5 Canvas**：使用了双层 Canvas 技术。
        -   `paintCanvas` (离屏)：用于持久化保存用户的笔迹。
        -   `output_canvas` (显示)：每一帧清除重绘，叠加视频流 + 笔迹 +
            UI 控件。
    -   **镜像文字算法**：为了解决 CSS `scaleX(-1)`
        导致的文字反转问题，在 Canvas 绘制文字时使用了
        `ctx.scale(-1, 1)` 进行二次反转，实现“负负得正”。

------------------------------------------------------------------------

## 📄 版权信息

-   本项目基于 **R Shiny** 框架。
-   手势识别技术由 **Google MediaPipe** 提供。
